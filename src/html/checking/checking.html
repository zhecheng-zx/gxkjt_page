<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>系统项目查重</title>
    <link href="../../assets/bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../../assets/upload/jquery.fileupload.css">
    <link href="../../css/main.css" rel="stylesheet" rel="stylesheet"/>
    <link rel="stylesheet" href="../../js/laDate/theme/default/laydate.css">

    <!--[if lt IE 9]>
    <script src="../../assets/html5shiv_3.7.3/html5shiv.min.js"></script>
    <script src="../../assets/respond.js_1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="../../css/public.css">
    <link rel="stylesheet" href="../../assets/bootstrap-table/bootstrap-table.min.css">
    <style>
        .demo-input {
            padding-left: 10px;
            height: 38px;
            min-width: 262px;
            line-height: 38px;
            border: 1px solid #e6e6e6;
            background-color: #fff;
            border-radius: 2px;
        }

        .demo-footer a {
            padding: 0 5px;
            color: #01AAED;
        }

        .bar {
            height: 18px;
            background: green;
        }

        .fileName{
            font-size: 12px;
        }
    </style>
</head>
<body>
<div class="mainPage">
    <div>
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
                <a href="#home" aria-controls="home" role="tab" data-toggle="tab">系统项目查重</a>
            </li>
            <li role="presentation">
                <a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">上传项目查重</a>
            </li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="home">
                <form action="">
                    <div>
                        <span class="has_mr">查重标注 :</span>
                        <input type="text" class="form-control" placeholder="标注用来记录您此次查重的显示信息">
                    </div>
                    <div class="radio">
                        <span class="has_mr">查重类型 :</span>
                        <label class="radio-inline">
                            <input type="radio" name="inlineRadioOptions" value="option1">
                            <span class="has_mr">对比查重</span>
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="inlineRadioOptions" value="option2">
                            <span class="has_mr">项目分析</span>
                        </label>
                    </div>
                    <div class="checkbox">
                        <span class="has_mr">查重字段 :</span>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="option1"> <span class="has_mr">项目名称</span>
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="option2"> <span class="has_mr">项目总体目标</span>
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="option3"> <span class="has_mr">项目主要内容</span>
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="option4"> <span class="has_mr">项目考核指标</span>
                        </label>
                    </div>
                    <div class="radio">
                        <span class="has_mr">查重范围 :</span>
                        <label class="radio-inline">
                            <input type="radio" name="inlineRadioOptions" value="option1"> <span
                                class="has_mr">内网</span>
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="inlineRadioOptions" value="option2"> <span
                                class="has_mr">外网</span>
                        </label>
                    </div>
                    <div class="checkbox">
                        <span class="has_mr">分析字段 :</span>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="option1"> <span class="has_mr">项目负责人</span>
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="option2"> <span class="has_mr">申报单位</span>
                        </label>
                        <button type="button" class="btn btn-success r_btn" data-toggle="modal"
                                data-target=".bs-example-modal-sm">提交
                        </button>
                        <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog"
                             aria-labelledby="mySmallModalLabel">
                            <div class="modal-dialog modal-sm" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="modal-img"></div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                                        <button type="button" class="btn btn-default">确认</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <div class="aline"></div>
                <div class="look_warPer">
                    <div class="look">
                        <div class="has_mar">
                            <button type="button" class="btn btn-primary ">查重项目</button>
                        </div>
                        <input type="text" class="demo-input" placeholder="请选择日期" id="test1">

                        <select name='make' class="sel">
                            <option selected>行业</option>
                            <option value='acura'>科技</option>
                            <option value='chrysler'>医疗</option>
                            <option value='dodge'>水污染</option>

                        </select>
                        <button type="button" class="btn btn-success ">查询</button>


                        <div class="table_list" style="overflow: hidden">
                            <table data-pagination="false">

                            </table>
                        </div>

                    </div>
                    <div class="look">
                        <div class="has_mar">
                            <button type="button" class="btn btn-primary">对比项目</button>
                        </div>
                        <input type="text" class="demo-input" placeholder="请选择日期" id="test2">
                        <select name='make' class="sel">
                            <option selected>行业</option>
                            <option value='acura'>科技</option>
                            <option value='chrysler'>医疗</option>
                            <option value='dodge'>水污染</option>

                        </select>
                        <button type="button" class="btn btn-success ">查询</button>

                        <div class="table_list">
                            <table data-pagination="true">

                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div role="tabpanel" class="tab-pane" id="profile">
                <form action="#">
                    <div>
                        <span class="has_mr">查重标注 :</span>
                        <input type="text" class="form-control" placeholder="标注用来记录您此次查重的显示信息">
                    </div>
                    <div class="checkbox">
                        <span class="has_mr">查重内容 :</span>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="option1"> <span class="has_mr">项目名称</span>
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="option2"> <span class="has_mr">项目总体目标</span>
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="option3"> <span class="has_mr">项目主要内容</span>
                        </label>
                        <label class="checkbox-inline">
                            <input type="checkbox" value="option4"> <span class="has_mr">项目考核指标</span>
                        </label>
                    </div>
                    <div class="checkbox">
                        <span class="has_mr">上传项目文件格式为申报项目文件格式 :</span> <span class="blue">下载模板文件</span>
                    </div>
                    <div class="radio">
                        <span class="has_mr">查重范围 :</span>
                        <label class="radio-inline">
                            <input type="radio" name="inlineRadioOptions" value="option1"> <span
                                class="has_mr">内网</span>
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="inlineRadioOptions" value="option2"> <span
                                class="has_mr">外网</span>
                        </label>

                        <button type="button" class="btn btn-success r_btn" data-toggle="modal"
                                data-target=".bs-example-modal-lg">提交
                        </button>
                        <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog"
                             aria-labelledby="myLargeModalLabel">
                            <div class="modal-dialog modal-lg" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="modal-img"></div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                                        <button type="button" class="btn btn-default">确认</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <div class="aline"></div>
                <div class="look_warPer">
                    <div class="look">
                        <div class="has_mar">
                            <button type="button" class="btn btn-primary ">查重项目</button>
                        </div>

                        <span class="btn btn-success fileinput-button">
                            <i class="glyphicon glyphicon-plus"></i>
                            <span>选择文件</span>
                            <input id="fileupload" type="file" name="files[]" multiple>
                        </span>
                        <button type="button" class="btn btn-default mrL20" id="uploadBtn">上传</button>
                        <span class="fileName mrL20" id="fileName"></span>
                        <div id="progress" class="progress checking-progress" style="display: none;">
                            <div class="progress-bar progress-bar-success"></div>
                        </div>

                        <div class="table_list">
                            <table data-pagination="false">

                            </table>
                        </div>

                    </div>
                    <div class="look">
                        <div class="has_mar">
                            <button type="button" class="btn btn-primary">对比项目</button>
                        </div>
                        <input type="text" class="demo-input" placeholder="请选择日期" id="test3">
                        <select name='make' class="sel">
                            <option selected>行业</option>
                            <option value='acura'>科技</option>
                            <option value='chrysler'>医疗</option>
                            <option value='dodge'>水污染</option>
                        </select>
                        <button type="button" class="btn btn-success ">查询</button>
                        <div class="table_list">
                            <table data-pagination="true">

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script src="../../assets/jQuery/jquery.min.js"></script>
<script src="../../assets/bootstrap-3.3.7/js/bootstrap.min.js"></script>
<script src="../../js/laDate/laydate.js"></script>
<script src="../../assets/bootstrap-table/bootstrap-table.min.js"></script>
<script src="../../assets/upload/jquery.ui.widget.js"></script>
<script src="../../assets/upload/jquery.iframe-transport.js"></script>
<script src="../../assets/upload/jquery.fileupload.js"></script>
<script>

    laydate.render({
        elem: '#test1',
        range: '~'//指定元素
    });
    laydate.render({
        elem: '#test2',
        range: '~'//指定元素
    });
    laydate.render({
        elem: '#test3',
        range: '~'//指定元素
    });


    $(function () {

        $('table').bootstrapTable({
            url: '../../json/data2.json',
            dataType: "json",
            height: 500,
            columns: [{
                field: 'id',
                title: '项目名称'
            }, {
                field: 'name',
                title: '编号'
            }, {
                field: 'price',
                title: '标题'
            }]
        });
    });

    var filesList = [];
    $(function () {
        $('#fileupload').fileupload({
            url: '', //后台上传路径
            dataType: 'json',
            autoUpload: false,
            acceptFileTypes: /(\.|\/)(xls|xlsx)$/i,
            maxNumberOfFiles: 1,
            maxFileSize: 1
        }).on('fileuploadadd',function (e, data) {
            console.log(data)
            var fileSize = data.originalFiles.length;
            if(fileSize > 1){
                filesList = [];
                alert('每次只能上传一个文件');
                return false;
            }
            var file = data.files[0];
            if(file.name.indexOf('xlsx') < 0 && file.name.indexOf('xls') < 0){
                alert('请上传正确格式的文件!');
                return false;
            }

            $('#fileName').text(file.name);
            filesList.push(data.files[0]);
        }).on('fileuploaddone', function (e, data) {
            //上传完成后的方法 调用addData()方法;

            //走完之后 清空文件列表
            filesList = [];
            $('#fileName').text('');
        }).on('fileuploadfail', function (e, data) {
            //上传失败的方法\
            $('#fileName').text('');
            filesList = [];
            console.error(e);
            alert('上传失败')
        }).on('fileuploadprogressall', function (e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $('#progress .progress-bar').css('width', progress + '%');
        });

        $('#uploadBtn').click(function () {
            console.log(filesList)
            if(filesList.length == 0){
                alert('请选择文件');
                return ;
            }
            $('#fileupload').fileupload('send', {files: filesList});
        })
    });

    
    function addData() {
        //TODO 每次添加前 要先把table清空
    }
</script>
</body>
</html>